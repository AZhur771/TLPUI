app: com.github.d4nj1.tlpui
ingredients:
  dist: groovy
  sources:
    - deb http://archive.ubuntu.com/ubuntu/ groovy main universe
    - deb http://archive.ubuntu.com/ubuntu/ groovy-updates main universe
    - deb http://archive.ubuntu.com/ubuntu/ groovy-security main universe
  packages:
    - python3-venv
    - python3-gi
  exclude:

script:
  - wget -c https://codeload.github.com/d4nj1/TLPUI/zip/refs/heads/master && unzip master && rm master
  - mkdir -p usr/share/metainfo/
  - cp TLPUI-master/AppImage/com.github.d4nj1.tlpui.appdata.xml usr/share/metainfo/
  - mv TLPUI-master/tlpui .
  - mkdir -p ./usr/share/icons/hicolor/scalable/apps/
  - cp tlpui/icons/themeable/hicolor/scalable/apps/com.github.d4nj1.tlpui.svg ./usr/share/icons/hicolor/scalable/apps/
  - cat > usr/bin/tlpui <<\EOF
  - cd ../ && python3 -m tlpui
  - EOF
  - chmod +x usr/bin/tlpui
  - mkdir -p usr/share/applications
  - cp TLPUI-master/tlpui.desktop usr/share/applications/
  - rm -rf TLPUI-master
